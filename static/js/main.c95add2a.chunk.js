(this.webpackJsonptwitter_clone=this.webpackJsonptwitter_clone||[]).push([[0],{63:function(e,t,n){},64:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(10),c=n.n(a),r=n(48),s=n.n(r),i=n(36),u=n(11),o=n(38),j=n(14),l=n(0),b=n.n(l),O=n(1),p=n(25),d=n(35),m=n(49),f=n(23),h=n(20),x=n(28),v={apiKey:"AIzaSyBc4Hh8Y09Ra-TzN1X-QPCaMLlaTx9mQ9M",authDomain:"twitter-53668.firebaseapp.com",projectId:"twitter-53668",storageBucket:"twitter-53668.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_ID:"1:883936743248:web:bfa3334875b217ce7ce655",REACT_APP_API_KEY:"AIzaSyBc4Hh8Y09Ra-TzN1X-QPCaMLlaTx9mQ9M",REACT_APP_AUTH_DOMAIN:"twitter-53668.firebaseapp.com",REACT_APP_MESSAGING_SENDER_ID:"883936743248",REACT_APP_PROJECT_ID:"twitter-53668",REACT_APP_STORAGE_BUCKET:"twitter-53668.appspot.com"}).REACT_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_ID:"1:883936743248:web:bfa3334875b217ce7ce655",REACT_APP_API_KEY:"AIzaSyBc4Hh8Y09Ra-TzN1X-QPCaMLlaTx9mQ9M",REACT_APP_AUTH_DOMAIN:"twitter-53668.firebaseapp.com",REACT_APP_MESSAGING_SENDER_ID:"883936743248",REACT_APP_PROJECT_ID:"twitter-53668",REACT_APP_STORAGE_BUCKET:"twitter-53668.appspot.com"}).REACT_APP_ID};Object(m.a)(v);var g=Object(f.d)(),_=Object(h.e)(),y=Object(x.c)(),w=n(6);var N=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(u.a)(r,2),i=s[0],o=s[1],j=Object(a.useState)(!0),l=Object(u.a)(j,2),p=l[0],d=l[1],m=Object(a.useState)(""),h=Object(u.a)(m,2),x=h[0],v=(h[1],function(e){var t=e.target,n=t.name,a=t.value;"email"===n&&c(a),"password"===n&&o(a)}),_=function(){var e=Object(O.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!p){e.next=8;break}return e.next=5,Object(f.c)(g,n,i);case 5:a=e.sent,e.next=12;break;case 8:return e.next=10,Object(f.e)(g,n,i);case 10:a=e.sent,console.log(a);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("form",{onSubmit:_,className:"container",children:[Object(w.jsx)("input",{name:"email",type:"email",placeholder:"Email",value:n,onChange:v,required:!0,className:"authInput"}),Object(w.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:i,onChange:v,required:!0,className:"authInput"}),Object(w.jsx)("input",{type:"submit",value:p?"Create Account":"LogIn",className:"authInput authSubmit"}),x&&Object(w.jsx)("span",{className:"authError",children:x})]}),Object(w.jsx)("span",{onClick:function(){return d((function(e){return!e}))},className:"authSwitch",children:p?"Login":"Create Account"})]})},A=(n(63),function(){var e=function(){var e=Object(O.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?a=new f.b:"github"===n&&(a=new f.a),e.next=4,Object(f.f)(g,a);case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"authContainer",children:[Object(w.jsx)(p.a,{icon:d.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(w.jsx)(N,{}),Object(w.jsxs)("div",{className:"authBtns",children:[Object(w.jsxs)("button",{onClick:e,name:"google",className:"authBtn",children:["Continue With Google ",Object(w.jsx)(p.a,{icon:d.b})]}),Object(w.jsxs)("button",{onClick:e,name:"github",className:"authBtn",children:["Continue With GitHub ",Object(w.jsx)(p.a,{icon:d.a})]})]})]})}),S=n(30);var C=function(e){var t=e.twitObj,n=e.isOwner,c=Object(a.useState)(!1),r=Object(u.a)(c,2),s=r[0],i=r[1],o=Object(a.useState)(t.twit),j=Object(u.a)(o,2),l=j[0],d=j[1],m=function(){var e=Object(O.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.confirm("Are you sure to delete this twit?"),console.log(t),!n){e.next=7;break}return e.next=5,Object(h.c)(Object(h.d)(_,"twits","".concat(t.id)));case 5:return e.next=7,Object(x.a)(Object(x.d)(y,t.attachmentUrl));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){return i((function(e){return!e}))},v=function(){var e=Object(O.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,Object(h.i)(Object(h.d)(_,"twits","".concat(t.id)),{twit:l});case 3:f();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"twit",children:s?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("form",{onSubmit:v,className:"container twitEdit",children:[t.attachmentUrl&&Object(w.jsx)("img",{src:t.attachmentUrl}),Object(w.jsx)("input",{type:"text",placeholder:"Edit your twit",value:l,onChange:function(e){d(e.target.value)},autoFocus:!0,required:!0,className:"formInput"}),Object(w.jsx)("input",{type:"submit",value:"Update Twit",className:"formBtn"})]}),Object(w.jsx)("span",{onClick:f,className:"formBtn cancelBtn",children:"Cancel"})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h4",{children:t.twit}),t.attachmentUrl&&Object(w.jsx)("img",{src:t.attachmentUrl}),n&&Object(w.jsxs)("div",{className:"twit_actions",children:[Object(w.jsx)("button",{onClick:m,children:Object(w.jsx)(p.a,{icon:S.d})}),Object(w.jsx)("button",{onClick:f,children:Object(w.jsx)(p.a,{icon:S.a})})]})]})})},E=n(75);var T=function(e){var t=e.userObj,n=Object(a.useState)(""),c=Object(u.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(""),o=Object(u.a)(i,2),j=o[0],l=o[1],d=Object(a.useRef)(),m=function(){var e=Object(O.a)(b.a.mark((function e(n){var a,c,i,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r||""!==j){e.next=2;break}return e.abrupt("return");case 2:if(n.preventDefault(),a="",!j){e.next=12;break}return c=Object(x.d)(y,"".concat(t.uid,"/").concat(Object(E.a)())),e.next=8,Object(x.e)(c,j,"data_url");case 8:return e.sent,e.next=11,Object(x.b)(c);case 11:a=e.sent;case 12:return i={twit:r,createdAt:Date.now(),userId:t.uid,attachmentUrl:a},e.prev=13,e.next=16,Object(h.a)(Object(h.b)(_,"twits"),i);case 16:u=e.sent,s(""),l(""),d.current.value="",console.log("Document written with ID: ",u.id),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(13),console.error("Error adding documnet: ",e.t0);case 26:case"end":return e.stop()}}),e,null,[[13,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("form",{onSubmit:m,className:"factoryForm",children:[Object(w.jsxs)("div",{className:"factoryInput_container",children:[Object(w.jsx)("input",{type:"text",className:"factoryInput_input",placeholder:"What's on your mind?",value:r,onChange:function(e){s(e.target.value)},maxLength:120}),Object(w.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput_arrow"})]}),Object(w.jsxs)("label",{for:"attach-file",className:"factoryInput_label",children:[Object(w.jsx)("span",{children:"Add photos"}),Object(w.jsx)(p.a,{icon:S.b})]}),Object(w.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",ref:d,onChange:function(e){if(e.target.files[0]){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){l(e.currentTarget.result)},n.readAsDataURL(t)}},style:{opacity:0}}),j&&Object(w.jsxs)("div",{className:"factoryForm_attachment",children:[Object(w.jsx)("img",{src:j,width:"30%",style:{backgroundImage:j}}),Object(w.jsxs)("div",{className:"factoryForm_clear",onClick:function(){d.current.value="",l("")},children:[Object(w.jsx)("span",{children:"Remove"}),Object(w.jsx)(p.a,{icon:S.c})]})]})]})};n(64);var I=function(e){var t=e.userObj,n=Object(a.useState)([]),c=Object(u.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){var e=Object(h.h)(Object(h.b)(_,"twits"),Object(h.g)("createdAt")),t=Object(h.f)(e,(function(e){var t=e.docs.map((function(e){return Object(i.a)({id:e.id},e.data())}));s(t)}));return function(){t()}}),[]),Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)(T,{userObj:t}),Object(w.jsx)("div",{style:{marginTop:30},children:r.map((function(e){return Object(w.jsx)(C,{twitObj:e,isOwner:e.userId===t.uid},e.id)}))})]})};var P=function(e){var t=e.userObj;return Object(w.jsx)("nav",{children:Object(w.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[Object(w.jsx)("li",{children:Object(w.jsx)(o.b,{to:"/",style:{marginRight:10},children:Object(w.jsx)(p.a,{icon:d.c,color:"#04AAFF",size:"2x"})})}),Object(w.jsx)("li",{children:Object(w.jsxs)(o.b,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[Object(w.jsx)(p.a,{icon:S.e,color:"#04AAFF",size:"2x"}),Object(w.jsx)("span",{style:{marginTop:10},children:t.displayName})]})})]})})};n(70);var R=function(e){var t=e.userObj,n=e.refreshUser,c=Object(a.useState)(t.displayName),r=Object(u.a)(c,2),s=r[0],i=r[1],o=Object(a.useState)(!1),l=Object(u.a)(o,2),p=l[0],d=l[1],m=Object(j.f)(),h=function(){var e=Object(O.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),t.displayName===s){e.next=5;break}return e.next=4,Object(f.g)(t,{displayName:s});case 4:n();case 5:x();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){d((function(e){return!e}))};return Object(w.jsxs)("div",{className:"container",children:[p?Object(w.jsxs)("form",{onSubmit:h,className:"profileForm",children:[Object(w.jsx)("input",{type:"text",autoFocus:!0,placeholder:"Display Name",value:s,onChange:function(e){i(e.target.value)},minLength:"2",className:"formInput"}),Object(w.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn",stype:{marginTop:10}})]}):Object(w.jsx)("input",{type:"button",className:"formBtn",onClick:x,value:"Modify"}),Object(w.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:function(){g.signOut(),m.push("/")},children:"LogOut"})]})};n(71);var D=function(e){var t=e.userObj,n=e.refreshUser,c=Object(a.useState)(""),r=Object(u.a)(c,2),s=r[0],i=r[1],o=function(){var e=Object(O.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,Object(f.g)(t,{displayName:s});case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("form",{onSubmit:o,className:"nickNameForm",children:[Object(w.jsx)("input",{type:"text",autoFocus:!0,placeholder:"Display Name",value:s,onChange:function(e){i(e.target.value)},minLength:"2",className:"nickNameInput"}),Object(w.jsx)("input",{type:"submit",value:"Make profile",className:"nickNameBtn",stype:{marginTop:10}})]})},k=function(e){var t=e.isLoggedIn,n=e.userObj,a=e.refreshUser;return Object(w.jsxs)(o.a,{children:[t&&n.displayName&&Object(w.jsx)(P,{userObj:n}),Object(w.jsx)(j.c,{children:t?Object(w.jsx)("div",{style:{maxWidth:890,width:"100px",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:n.displayName?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(j.a,{path:"/",exact:!0,children:Object(w.jsx)(I,{userObj:n})}),Object(w.jsx)(j.a,{path:"/profile",children:Object(w.jsx)(R,{userObj:n,refreshUser:a})})]}):Object(w.jsx)(j.a,{path:"/",children:Object(w.jsx)(D,{userObj:n,refreshUser:a})})}):Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(j.a,{children:Object(w.jsx)(A,{exact:!0,path:"/"})})})})]})};var U=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),s=Object(u.a)(r,2),o=s[0],j=s[1];return Object(a.useEffect)((function(){g.onAuthStateChanged((function(e){j(e||null),c(!0)}))}),[o]),Object(w.jsx)(w.Fragment,{children:n?Object(w.jsx)(k,{isLoggedIn:o,userObj:o,refreshUser:function(){var e=g.currentUser;j(Object(i.a)(Object(i.a)({},o),{},{userObj:{displayName:e.displayName,photoURL:e.photoURL}}))}}):"Initializing..."})};n(72);s.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(U,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.c95add2a.chunk.js.map